(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))o(t);new MutationObserver(t=>{for(const a of t)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&o(s)}).observe(document,{childList:!0,subtree:!0});function r(t){const a={};return t.integrity&&(a.integrity=t.integrity),t.referrerPolicy&&(a.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?a.credentials="include":t.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function o(t){if(t.ep)return;t.ep=!0;const a=r(t);fetch(t.href,a)}})();const b={a11:1,a12:0,a21:0,a22:1};function f(e,n){return{x:e.a11*n.x+e.a12*n.y,y:e.a21*n.x+e.a22*n.y}}function p(e){return e.a11*e.a22-e.a12*e.a21}function E(e,n,r){return{a11:e.a11+(n.a11-e.a11)*r,a12:e.a12+(n.a12-e.a12)*r,a21:e.a21+(n.a21-e.a21)*r,a22:e.a22+(n.a22-e.a22)*r}}function d(e,n){return{x:n.origin.x+e.x*n.scale,y:n.origin.y-e.y*n.scale}}function v(e,n){const r=e.canvas.width,o=e.canvas.height,t={scale:Math.min(r,o)/8,origin:{x:r/2,y:o/2}};e.clearRect(0,0,r,o),L(e,t),T(e,t),m(e,n.square,t,"rgba(0,0,0,0.15)","rgba(0,0,0,0.6)");const a=n.square.map(s=>f(n.A,s));m(e,a,t,"rgba(255,0,0,0.15)","rgba(255,0,0,0.9)"),l(e,{x:1,y:0},t,"rgba(0,0,255,0.9)"),l(e,{x:0,y:1},t,"rgba(0,0,255,0.9)"),l(e,f(n.A,{x:1,y:0}),t,"rgba(255,0,0,0.9)"),l(e,f(n.A,{x:0,y:1}),t,"rgba(255,0,0,0.9)")}function L(e,n){const r=e.canvas.width,o=e.canvas.height,t=n.scale;e.beginPath();for(let a=n.origin.x%t;a<=r;a+=t)e.moveTo(a,0),e.lineTo(a,o);for(let a=n.origin.y%t;a<=o;a+=t)e.moveTo(0,a),e.lineTo(r,a);e.strokeStyle="rgba(0,0,0,0.08)",e.lineWidth=1,e.stroke()}function T(e,n){const r=e.canvas.width,o=e.canvas.height;e.beginPath(),e.moveTo(0,n.origin.y),e.lineTo(r,n.origin.y),e.moveTo(n.origin.x,0),e.lineTo(n.origin.x,o),e.strokeStyle="rgba(0,0,0,0.35)",e.lineWidth=2,e.stroke()}function m(e,n,r,o,t){if(n.length===0)return;const a=d(n[0],r);e.beginPath(),e.moveTo(a.x,a.y);for(let s=1;s<n.length;s++){const g=d(n[s],r);e.lineTo(g.x,g.y)}e.closePath(),e.fillStyle=o,e.fill(),e.strokeStyle=t,e.lineWidth=2,e.stroke()}function l(e,n,r,o){const t=d({x:0,y:0},r),a=d(n,r);e.beginPath(),e.moveTo(t.x,t.y),e.lineTo(a.x,a.y),e.strokeStyle=o,e.lineWidth=3,e.stroke(),e.beginPath(),e.arc(a.x,a.y,4,0,Math.PI*2),e.fillStyle=o,e.fill()}function P(){const e=n=>{const r=document.getElementById(n);if(!r)throw new Error(`Elemento #${n} não encontrado no HTML`);return r};return{a11:e("a11"),a12:e("a12"),a21:e("a21"),a22:e("a22"),t:e("t"),detEl:e("det")}}function I(e){return{a11:Number(e.a11.value),a12:Number(e.a12.value),a21:Number(e.a21.value),a22:Number(e.a22.value)}}const S=document.querySelector("#c"),N=S.getContext("2d"),i=P(),q=document.getElementById("tLabel"),M=document.getElementById("area"),B=document.getElementById("orient"),F=document.getElementById("playBtn"),k=document.getElementById("resetBtn");let u=!1,y=0;function c(){const e=I(i),n=Number(i.t.value),r=E(b,e,n),o=p(e);i.detEl.textContent=`det(A) = ${o.toFixed(2)}`,M.textContent=`escala de área = ${Math.abs(o).toFixed(2)}`,B.textContent=`orientação: ${o<0?"invertida":"preservada"}`,q.textContent=`t = ${n.toFixed(2)}`,v(N,{A:r,square:O})}const O=[{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}];function w(){const e=()=>c();["input","change"].forEach(n=>{i.a11.addEventListener(n,e),i.a12.addEventListener(n,e),i.a21.addEventListener(n,e),i.a22.addEventListener(n,e),i.t.addEventListener(n,e)})}function h(){if(!u)return;let e=Number(i.t.value);e+=.01,e>1&&(e=0),i.t.value=String(e),c(),y=requestAnimationFrame(h)}F.addEventListener("click",()=>{u=!u,u?y=requestAnimationFrame(h):cancelAnimationFrame(y)});k.addEventListener("click",()=>{i.a11.value="1",i.a12.value="0",i.a21.value="0",i.a22.value="1",i.t.value="1",c()});w();c();
